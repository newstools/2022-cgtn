Apple's stock market value topped $3 trillion for a second day on Tuesday, but the iPhone maker's shares failed again to hold that gain by the session's end. Apple shares ended down 1.3 percent at $179.70, leaving its market capitalization at $2.95 trillion. Apple accounts for nearly 7 percent of S&P 500 index's value, according to Refinitiv data, the highest for a single stock in the index at a time when the benchmark is perched at a peak. Surging demand for iPhones, MacBooks and iPads during the pandemic helped push the Cupertino, California company's market capitalization past $2 trillion in August 2020. "Apple has been one of the key pandemic trades for a lot of people and as we exit the pandemic ... the iPhone maker is going to struggle a little bit," warned Edward Moya, senior market analyst at Oanda in New York. Apple's massive share repurchases in recent years have also fueled its stock rally. The company has bought back $348 billion worth of shares in the five years through the September quarter of 2021, reducing its share count by 23 percent over that period, according to Howard Silverblatt, senior index analyst at S&P Dow Jones Indices. "You know there's going to be buying," Silverblatt said. "From an investor point of view, it's very important." With Tesla now the world's most valuable automaker as Wall Street bets heavily on electric cars, many investors expect Apple to launch its own vehicle within the next few years as it looks to reduce its current reliance on iPhones for about half of its revenue. Notably, Apple is worth more than any of Europe's main regional indexes including Britain's FTSE 100, France's CAC 40, Germany's DAX, Spain's IBEX 35 and Italy's FTSE MIB. Apple's stock is up 1 percent in 2022 after gaining 34 percent last year. It is trading at about 31 times expected 12-month earnings, which is expensive compared to its five-year average of 20 times expected earnings, according to Refinitiv data.